<mxfile host="app.diagrams.net" modified="2025-01-15T10:00:00.000Z" agent="5.0" etag="abc123" version="22.1.16" type="device">
  <diagram id="System-Architecture" name="System Architecture">
    <mxGraphModel dx="1422" dy="834" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Main Title -->
        <mxCell id="title" value="Chigee XR2 OBD2 Module&#xa;Professional Modular Architecture" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1;fontFamily=Arial" parent="1" vertex="1">
          <mxGeometry x="400" y="20" width="350" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Hardware Layer -->
        <mxCell id="hardware" value="ESP32-WROOM-32&#xa;Hardware Platform" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="50" y="150" width="200" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Configuration Layer -->
        <mxCell id="config-layer" value="Configuration Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="300" y="150" width="200" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="project-config" value="project_config.h&#xa;• Feature flags&#xa;• Pin definitions&#xa;• Build settings" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656" parent="1" vertex="1">
          <mxGeometry x="280" y="240" width="120" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="hardware-config" value="hardware_config.h&#xa;• ESP32 abstraction&#xa;• Hardware validation&#xa;• Power management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656" parent="1" vertex="1">
          <mxGeometry x="420" y="240" width="120" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Core Modules -->
        <mxCell id="modules-layer" value="Core Modules" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="600" y="150" width="200" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="bluetooth-module" value="BluetoothManager&#xa;• Device spoofing&#xa;• ELM327 emulation&#xa;• Security features&#xa;• Connection mgmt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf" parent="1" vertex="1">
          <mxGeometry x="550" y="240" width="150" height="90" as="geometry"/>
        </mxCell>
        
        <mxCell id="obd2-module" value="OBD2Handler&#xa;• AT commands&#xa;• PID processing&#xa;• Vehicle simulation&#xa;• Protocol mgmt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf" parent="1" vertex="1">
          <mxGeometry x="720" y="240" width="150" height="90" as="geometry"/>
        </mxCell>
        
        <mxCell id="can-module" value="CANInterface&#xa;• ESP32 TWAI driver&#xa;• Message filtering&#xa;• OBD2 protocols&#xa;• Statistics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf" parent="1" vertex="1">
          <mxGeometry x="890" y="240" width="150" height="90" as="geometry"/>
        </mxCell>
        
        <!-- External Interfaces -->
        <mxCell id="external-layer" value="External Interfaces" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="50" y="400" width="200" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="chigee-xr2" value="Chigee XR2 Radar&#xa;• Bluetooth SPP&#xa;• OBD2 data request&#xa;• Vehicle monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450" parent="1" vertex="1">
          <mxGeometry x="50" y="490" width="150" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="vehicle-ecu" value="Vehicle ECU&#xa;• CAN bus interface&#xa;• OBD2 port&#xa;• Real-time data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450" parent="1" vertex="1">
          <mxGeometry x="220" y="490" width="150" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Development Tools -->
        <mxCell id="dev-tools-layer" value="Development Tools" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="450" y="400" width="200" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="platformio" value="PlatformIO&#xa;• Professional build&#xa;• Dependency mgmt&#xa;• Testing framework" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6" parent="1" vertex="1">
          <mxGeometry x="400" y="490" width="150" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="vscode" value="VS Code + Debug&#xa;• Code completion&#xa;• Hardware debugging&#xa;• Serial monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6" parent="1" vertex="1">
          <mxGeometry x="570" y="490" width="150" height="80" as="geometry"/>
        </mxCell>
        
        <!-- Key Features -->
        <mxCell id="features" value="Key Features&#xa;✅ Professional modular architecture&#xa;✅ Hardware abstraction layer&#xa;✅ Device spoofing (ELM327)&#xa;✅ Real-time vehicle simulation&#xa;✅ Professional development tools&#xa;✅ Comprehensive error handling" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=left;verticalAlign=top" parent="1" vertex="1">
          <mxGeometry x="800" y="490" width="250" height="120" as="geometry"/>
        </mxCell>
        
        <!-- Data Flow Arrows -->
        <mxCell id="flow1" value="Bluetooth SPP" style="endArrow=classic;startArrow=classic;html=1;strokeWidth=2;strokeColor=#d79b00" parent="1" source="chigee-xr2" target="bluetooth-module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="420" as="sourcePoint"/>
            <mxPoint x="440" y="370" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="250" y="530"/>
              <mxPoint x="250" y="370"/>
              <mxPoint x="625" y="370"/>
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="flow2" value="AT Commands" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#d79b00" parent="1" source="bluetooth-module" target="obd2-module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="420" as="sourcePoint"/>
            <mxPoint x="440" y="370" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="flow3" value="CAN Messages" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#d79b00" parent="1" source="obd2-module" target="can-module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="420" as="sourcePoint"/>
            <mxPoint x="440" y="370" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="flow4" value="OBD2 Protocol" style="endArrow=classic;startArrow=classic;html=1;strokeWidth=2;strokeColor=#d79b00" parent="1" source="vehicle-ecu" target="can-module" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="420" as="sourcePoint"/>
            <mxPoint x="440" y="370" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="400" y="530"/>
              <mxPoint x="965" y="530"/>
              <mxPoint x="965" y="210"/>
            </Array>
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
  
  <diagram id="Module-Detail" name="Module Detail">
    <mxGraphModel dx="1422" dy="834" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- BluetoothManager Module -->
        <mxCell id="bt-title" value="BluetoothManager Module" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="50" y="20" width="300" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="bt-spoofing" value="Device Spoofing&#xa;• MAC address spoofing&#xa;• Device profiles&#xa;• ELM327 emulation&#xa;• Manufacturer ID" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656" parent="1" vertex="1">
          <mxGeometry x="50" y="120" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="bt-connection" value="Connection Management&#xa;• SPP service&#xa;• Pairing control&#xa;• Auto-reconnect&#xa;• Status monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366" parent="1" vertex="1">
          <mxGeometry x="220" y="120" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="bt-security" value="Security Features&#xa;• PIN validation&#xa;• Fingerprinting&#xa;• Access control&#xa;• Logging" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450" parent="1" vertex="1">
          <mxGeometry x="390" y="120" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <!-- OBD2Handler Module -->
        <mxCell id="obd2-title" value="OBD2Handler Module" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="50" y="280" width="300" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="obd2-at" value="AT Commands&#xa;• ATZ reset&#xa;• ATE echo control&#xa;• ATSP protocol&#xa;• ATI device info" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656" parent="1" vertex="1">
          <mxGeometry x="50" y="380" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="obd2-pid" value="PID Processing&#xa;• Mode 01 current data&#xa;• Mode 03 DTCs&#xa;• Mode 09 VIN info&#xa;• Custom PIDs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366" parent="1" vertex="1">
          <mxGeometry x="220" y="380" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="obd2-sim" value="Vehicle Simulation&#xa;• Realistic data&#xa;• Dynamic values&#xa;• Statistics tracking&#xa;• Error simulation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450" parent="1" vertex="1">
          <mxGeometry x="390" y="380" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <!-- CANInterface Module -->
        <mxCell id="can-title" value="CANInterface Module" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="590" y="20" width="300" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="can-twai" value="ESP32 TWAI Driver&#xa;• CAN controller init&#xa;• Message TX/RX&#xa;• Error handling&#xa;• Bus-off recovery" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656" parent="1" vertex="1">
          <mxGeometry x="590" y="120" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="can-filter" value="Message Filtering&#xa;• Whitelist/blacklist&#xa;• ID ranges&#xa;• Custom filters&#xa;• OBD2 specific" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366" parent="1" vertex="1">
          <mxGeometry x="760" y="120" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="can-stats" value="Statistics &amp; Debug&#xa;• Message counters&#xa;• Error tracking&#xa;• Bus utilization&#xa;• Diagnostics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450" parent="1" vertex="1">
          <mxGeometry x="930" y="120" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <!-- Configuration System -->
        <mxCell id="config-title" value="Configuration System" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=16;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="590" y="280" width="300" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="config-project" value="project_config.h&#xa;• Version info&#xa;• Feature flags&#xa;• Build settings&#xa;• Debug options" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656" parent="1" vertex="1">
          <mxGeometry x="590" y="380" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="config-hardware" value="hardware_config.h&#xa;• Pin definitions&#xa;• ESP32 settings&#xa;• Hardware validation&#xa;• Power management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366" parent="1" vertex="1">
          <mxGeometry x="760" y="380" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <mxCell id="config-runtime" value="Runtime Config&#xa;• Dynamic settings&#xa;• User preferences&#xa;• Calibration data&#xa;• Profile switching" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450" parent="1" vertex="1">
          <mxGeometry x="930" y="380" width="150" height="100" as="geometry"/>
        </mxCell>
        
        <!-- Data Flow -->
        <mxCell id="flow-title" value="Data Flow Between Modules" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="50" y="540" width="400" height="40" as="geometry"/>
        </mxCell>
        
        <mxCell id="step1" value="1. Chigee XR2 connects via Bluetooth" style="rounded=1;whiteSpace=wrap;html=1" parent="1" vertex="1">
          <mxGeometry x="50" y="600" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="step2" value="2. BluetoothManager handles connection" style="rounded=1;whiteSpace=wrap;html=1" parent="1" vertex="1">
          <mxGeometry x="270" y="600" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="step3" value="3. AT commands sent to OBD2Handler" style="rounded=1;whiteSpace=wrap;html=1" parent="1" vertex="1">
          <mxGeometry x="490" y="600" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="step4" value="4. OBD2Handler processes commands" style="rounded=1;whiteSpace=wrap;html=1" parent="1" vertex="1">
          <mxGeometry x="710" y="600" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="step5" value="5. CANInterface sends to vehicle ECU" style="rounded=1;whiteSpace=wrap;html=1" parent="1" vertex="1">
          <mxGeometry x="930" y="600" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="step6" value="6. Response flows back through chain" style="rounded=1;whiteSpace=wrap;html=1" parent="1" vertex="1">
          <mxGeometry x="50" y="650" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="step7" value="7. Realistic vehicle data simulated" style="rounded=1;whiteSpace=wrap;html=1" parent="1" vertex="1">
          <mxGeometry x="270" y="650" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <mxCell id="step8" value="8. Statistics and diagnostics updated" style="rounded=1;whiteSpace=wrap;html=1" parent="1" vertex="1">
          <mxGeometry x="490" y="650" width="200" height="30" as="geometry"/>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
                <mxCell id="7" value="&lt;h2&gt;Core Modules&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="600" y="140" width="200" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="BluetoothManager&lt;br&gt;• Device spoofing&lt;br&gt;• ELM327 emulation&lt;br&gt;• Security features&lt;br&gt;• Connection mgmt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="550" y="230" width="150" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="OBD2Handler&lt;br&gt;• AT commands&lt;br&gt;• PID processing&lt;br&gt;• Vehicle simulation&lt;br&gt;• Protocol mgmt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="720" y="230" width="150" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="CANInterface&lt;br&gt;• ESP32 TWAI driver&lt;br&gt;• Message filtering&lt;br&gt;• OBD2 protocols&lt;br&gt;• Statistics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
                    <mxGeometry x="890" y="230" width="150" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="&lt;h2&gt;External Interfaces&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="50" y="380" width="200" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="Chigee XR2 Radar&lt;br&gt;• Bluetooth SPP&lt;br&gt;• OBD2 data request&lt;br&gt;• Vehicle monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
                    <mxGeometry x="50" y="470" width="150" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="Vehicle ECU&lt;br&gt;• CAN bus interface&lt;br&gt;• OBD2 port&lt;br&gt;• Real-time data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
                    <mxGeometry x="220" y="470" width="150" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="&lt;h2&gt;Development Tools&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="450" y="380" width="200" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="PlatformIO&lt;br&gt;• Professional build&lt;br&gt;• Dependency mgmt&lt;br&gt;• Testing framework" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="400" y="470" width="150" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="VS Code + Debug&lt;br&gt;• Code completion&lt;br&gt;• Hardware debugging&lt;br&gt;• Serial monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
                    <mxGeometry x="570" y="470" width="150" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="&lt;h2&gt;Data Flow&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="800" y="380" width="200" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="18" value="Bluetooth SPP" style="endArrow=classic;startArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="12" target="8">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="250" y="510"/>
                            <mxPoint x="250" y="350"/>
                            <mxPoint x="625" y="350"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="19" value="AT Commands" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="8" target="9">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="20" value="CAN Messages" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="9" target="10">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="21" value="OBD2 Protocol" style="endArrow=classic;startArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="13" target="10">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="400" y="510"/>
                            <mxPoint x="965" y="510"/>
                            <mxPoint x="965" y="200"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="22" value="Config" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="5">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="23" value="Config" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="6">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="24" value="Hardware Access" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="3" target="4">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="25" value="Module Access" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="4" target="7">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="26" value="&lt;h3&gt;Key Features&lt;/h3&gt;&lt;div&gt;✅ Professional modular architecture&lt;/div&gt;&lt;div&gt;✅ Hardware abstraction layer&lt;/div&gt;&lt;div&gt;✅ Device spoofing (ELM327)&lt;/div&gt;&lt;div&gt;✅ Real-time vehicle simulation&lt;/div&gt;&lt;div&gt;✅ Professional development tools&lt;/div&gt;&lt;div&gt;✅ Comprehensive error handling&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="1">
                    <mxGeometry x="800" y="470" width="250" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="27" value="System Flow" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="3">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="585" y="120"/>
                            <mxPoint x="150" y="120"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="28" value="System Flow" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="4">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="585" y="120"/>
                            <mxPoint x="400" y="120"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="29" value="System Flow" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="2" target="7">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="390" y="420" as="sourcePoint"/>
                        <mxPoint x="440" y="370" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="585" y="120"/>
                            <mxPoint x="700" y="120"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="9f5x8q2lBR-mOVH2nRAQ" name="Module Detail">
        <mxGraphModel dx="1386" dy="798" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="30" value="&lt;h1&gt;BluetoothManager Module&lt;/h1&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="50" y="20" width="250" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="31" value="Device Spoofing&lt;br&gt;• MAC address spoofing&lt;br&gt;• Device profiles&lt;br&gt;• ELM327 emulation&lt;br&gt;• Manufacturer ID" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="50" y="120" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="Connection Management&lt;br&gt;• SPP service&lt;br&gt;• Pairing control&lt;br&gt;• Auto-reconnect&lt;br&gt;• Status monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="220" y="120" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="Security Features&lt;br&gt;• PIN validation&lt;br&gt;• Fingerprinting&lt;br&gt;• Access control&lt;br&gt;• Logging" style="rounded=1;whiteSpace=wrap;html=1;fillColor="#f8cecc" strokeColor="#b85450">" vertex="1" parent="1">
                    <mxGeometry x="390" y="120" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="&lt;h1&gt;OBD2Handler Module&lt;/h1&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="50" y="280" width="250" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="35" value="AT Commands&lt;br&gt;• ATZ reset&lt;br&gt;• ATE echo control&lt;br&gt;• ATSP protocol&lt;br&gt;• ATI device info" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="50" y="380" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="36" value="PID Processing&lt;br&gt;• Mode 01 current data&lt;br&gt;• Mode 03 DTCs&lt;br&gt;• Mode 09 VIN info&lt;br&gt;• Custom PIDs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="220" y="380" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="Vehicle Simulation&lt;br&gt;• Realistic data&lt;br&gt;• Dynamic values&lt;br&gt;• Statistics tracking&lt;br&gt;• Error simulation" style="rounded=1;whiteSpace=wrap;html=1;fillColor="#f8cecc" strokeColor="#b85450">" vertex="1" parent="1">
                    <mxGeometry x="390" y="380" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="38" value="&lt;h1&gt;CANInterface Module&lt;/h1&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="590" y="20" width="250" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="39" value="ESP32 TWAI Driver&lt;br&gt;• CAN controller init&lt;br&gt;• Message TX/RX&lt;br&gt;• Error handling&lt;br&gt;• Bus-off recovery" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="590" y="120" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="Message Filtering&lt;br&gt;• Whitelist/blacklist&lt;br&gt;• ID ranges&lt;br&gt;• Custom filters&lt;br&gt;• OBD2 specific" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="760" y="120" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="41" value="Statistics &amp; Debug&lt;br&gt;• Message counters&lt;br&gt;• Error tracking&lt;br&gt;• Bus utilization&lt;br&gt;• Diagnostics" style="rounded=1;whiteSpace=wrap;html=1;fillColor="#f8cecc" strokeColor="#b85450">" vertex="1" parent="1">
                    <mxGeometry x="930" y="120" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="42" value="&lt;h1&gt;Configuration System&lt;/h1&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="590" y="280" width="250" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="43" value="project_config.h&lt;br&gt;• Version info&lt;br&gt;• Feature flags&lt;br&gt;• Build settings&lt;br&gt;• Debug options" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
                    <mxGeometry x="590" y="380" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="44" value="hardware_config.h&lt;br&gt;• Pin definitions&lt;br&gt;• ESP32 settings&lt;br&gt;• Hardware validation&lt;br&gt;• Power management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
                    <mxGeometry x="760" y="380" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="45" value="Runtime Config&lt;br&gt;• Dynamic settings&lt;br&gt;• User preferences&lt;br&gt;• Calibration data&lt;br&gt;• Profile switching" style="rounded=1;whiteSpace=wrap;html=1;fillColor="#f8cecc" strokeColor="#b85450">" vertex="1" parent="1">
                    <mxGeometry x="930" y="380" width="150" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="46" value="&lt;h2&gt;Data Flow Between Modules&lt;/h2&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1" vertex="1" parent="1">
                    <mxGeometry x="50" y="540" width="300" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="47" value="1. Chigee XR2 connects via Bluetooth" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="50" y="600" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="48" value="2. BluetoothManager handles connection" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="270" y="600" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="49" value="3. AT commands sent to OBD2Handler" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="490" y="600" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="50" value="4. OBD2Handler processes commands" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="710" y="600" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="51" value="5. CANInterface sends to vehicle ECU" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="930" y="600" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="6. Response flows back through chain" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="50" y="650" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="53" value="7. Realistic vehicle data simulated" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="270" y="650" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="54" value="8. Statistics and diagnostics updated" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="490" y="650" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="55" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="47" target="48">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="720" as="sourcePoint"/>
                        <mxPoint x="570" y="670" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="56" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="48" target="49">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="720" as="sourcePoint"/>
                        <mxPoint x="570" y="670" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="57" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="49" target="50">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="720" as="sourcePoint"/>
                        <mxPoint x="570" y="670" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="58" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="50" target="51">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="720" as="sourcePoint"/>
                        <mxPoint x="570" y="670" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="59" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="52" target="53">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="720" as="sourcePoint"/>
                        <mxPoint x="570" y="670" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="60" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="53" target="54">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="520" y="720" as="sourcePoint"/>
                        <mxPoint x="570" y="670" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>